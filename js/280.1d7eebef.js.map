{"version":3,"file":"js/280.1d7eebef.js","mappings":"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","sources":["webpack://btc-vue/./src/views/RealTime.vue","webpack://btc-vue/./src/views/RealTime.vue?e070"],"sourcesContent":["<template>\n  <div class=\"hello\">\n    <!-- 标题栏，带返回按钮 -->\n    <div class=\"title-bar\">\n      <button @click=\"goBack\">返回</button>\n      <h1>{{ name }} - USDT 今日实时数据</h1>\n    </div>\n    <div class=\"button-list\">\n      <!-- 使用 v-for 渲染多个按钮，每个按钮显示 label，并包含内容和 symbol 数据 -->\n      <button v-for=\"(button, index) in buttons\" :key=\"index\" @click=\"handleClick(button)\">\n        {{ button.content }}\n      </button>\n    </div>\n    <!-- 图表容器 -->\n    <div ref=\"chartContainer\" id=\"main\" style=\"width: 100%; height: 600px\"></div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport * as echarts from \"echarts\";\n// 全局引用toast后，这里就不需要引用了\n// import { showToast as toast } from \"vant\";\n\n// 加多一些参数，interval和limit\n// websocket 刷新数据\n\nconst upColor = \"#ec0000\"; // K线涨的颜色\nconst upBorderColor = \"#8A0000\"; // K线涨的边框颜色\nconst downColor = \"#00da3c\"; // K线跌的颜色\nconst downBorderColor = \"#008F28\"; // K线跌的边框颜色\n\nexport default {\n  myChart: null, // 用于存储 ECharts 实例，类似成员变量\n\n  data() {\n    // 响应式的数据\n    return {\n      name: \"BTC-USDT\", // 定义组件的名称\n      symbol: \"BTC-USDT\",\n      interval: \"1d\",\n      limit: 500,\n      // 使用对象数组，每个对象包含 content、label、symbol\n      buttons: [\n        { content: \"1分\", interval: \"1m\" },\n        { content: \"15分钟\", interval: \"15m\" },\n        { content: \"1小时\", interval: \"1h\" },\n        { content: \"1天\", interval: \"1d\" },\n        { content: \"1月\", interval: \"1M\" },\n      ],\n\n      data0: null, // 股票数据\n      categoryData: [], // 存储时间\n      values: [], // 存储K线数据\n    };\n  },\n\n  created() {},\n\n  mounted() {\n    // this.initChart(); // 在组件挂载时初始化图表\n    // 所有参数都在route里面\n    console.log(this.$route);\n    var symbol = this.$route.params.symbol || this.$route.query.symbol;\n    this.symbol = symbol;\n    this.name = this.$route.params.name || this.$route.query.name;\n    console.log(\"name:\", this.name, \", symbol:\", this.symbol);\n    // 如果没有获取到 symbol，提供一个默认值\n    if (!symbol) {\n      console.error(\"Symbol 未找到，使用默认值 BTCUSDT\");\n      symbol = \"BTCUSDT\"; // 默认值\n    }\n    this.fetchDataAndInitChart(symbol, this.interval, this.limit);\n\n    // 添加 resize 事件监听\n    window.addEventListener(\"resize\", this.resizeChart);\n  },\n\n  beforeUnmount() {\n    // 清除 resize 事件监听\n    window.removeEventListener(\"resize\", this.resizeChart);\n  },\n\n  methods: {\n    // 按钮点击事件，接收按钮对象\n    handleClick(button) {\n      this.$toast(`${button.content}, ${button.interval}`);\n\n      this.fetchDataAndInitChart(this.symbol, button.interval, 500);\n    },\n    // 获取数据并初始化图表\n    fetchDataAndInitChart(symbol, interval, limit) {\n      // 加多一些参数，interval和limit\n      const apiUrl = `https://data-api.binance.vision/api/v3/uiKlines?symbol=${symbol}&interval=${interval}&limit=${limit}`;\n      console.log(\"apiUrl: \", apiUrl);\n      axios\n        .get(apiUrl)\n        .then((response) => {\n          this.data0 = response.data;\n          const processedData = this.splitData(this.data0); // 拆分数据\n          this.categoryData = processedData.categoryData; // 赋值日期数据\n          this.values = processedData.values; // 赋值K线数据\n          this.initChart(this.name + \"-USDT\"); // 初始化图表\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n    },\n\n    splitData(rawData) {\n      const categoryData = []; // 存储日期\n      const values = []; // 存储K线数据\n      for (let i = 0; i < rawData.length; i++) {\n        const item = rawData[i];\n        categoryData.push(new Date(item[0]).toLocaleString()); // 把时间戳转为可读日期格式\n        // 确保格式 [开盘价, 收盘价, 最低价, 最高价]\n        values.push([\n          parseFloat(item[1]), // 开盘价\n          parseFloat(item[4]), // 收盘价\n          parseFloat(item[3]), // 最低价\n          parseFloat(item[2]), // 最高价\n        ]);\n      }\n      return {\n        categoryData,\n        values,\n      };\n    },\n\n    // 初始化ECharts图表\n    initChart(name) {\n      console.log(\"initChart\");\n      // 确保categoryData和values都有有效数据\n      if (!this.categoryData.length || !this.values.length) {\n        console.error(\"数据未加载完成或无效\");\n        return;\n      }\n\n      const chartDom = this.$refs.chartContainer; // 使用ref来获取DOM节点\n      this.myChart = echarts.init(chartDom, null, {\n        renderer: \"canvas\",\n        useDirtyRect: false,\n      }); // 初始化图表\n\n      const option = {\n        title: {\n          text: name, // 'BTC-USDT'\n          left: 0,\n        },\n        tooltip: {\n          // 如果这里设置了axis，那么其他的tooltip设置会不生效\n          trigger: \"item\", // 鼠标悬浮时显示提示框，\n          axisPointer: {\n            type: \"cross\", // 显示十字指针\n          },\n        },\n        legend: {\n          data: [\"日K\"], // 图例，显示K线和各均线\n          selectedMode: \"multiple\", // 图例的选择模式，可以是 'single' 或 'multiple'，防止数据丢失\n        },\n        grid: {\n          left: \"10%\",\n          right: \"10%\",\n          bottom: \"15%\",\n        },\n        xAxis: {\n          type: \"category\", // X轴为类别轴，使用日期数据\n          data: this.categoryData, // 日期数据\n          boundaryGap: false, // 紧贴边界\n          axisLine: { onZero: false }, // Y轴不与X轴重合\n          splitLine: { show: false }, // 不显示网格线\n          min: \"dataMin\", // X轴最小值\n          max: \"dataMax\", // X轴最大值\n        },\n        yAxis: {\n          scale: true, // Y轴刻度\n          splitArea: {\n            show: true, // 显示Y轴的网格区域\n          },\n        },\n        dataZoom: [\n          {\n            type: \"inside\", // 内部缩放\n            start: 50, // 初始的显示区域\n            end: 100,\n          },\n          {\n            show: true,\n            type: \"slider\", // 显示滑动条\n            top: \"90%\",\n            start: 50,\n            end: 100,\n          },\n        ],\n        series: [\n          {\n            name: \"日K\",\n            type: \"candlestick\", // K线图\n            data: this.values, // K线图数据\n            itemStyle: {\n              color: upColor,\n              color0: downColor,\n              borderColor: upBorderColor,\n              borderColor0: downBorderColor,\n            },\n            markPoint: {\n              // 标记点（如最高价、最低价）\n              label: {\n                formatter: function (param) {\n                  return param != null ? Math.round(param.value) + \"\" : \"\";\n                },\n              },\n              data: [\n                {\n                  name: \"Mark\",\n                  coord: [\"2013/5/31\", 2300], // 一个标记点\n                  value: 2300,\n                  itemStyle: {\n                    color: \"rgb(41,60,85)\",\n                  },\n                },\n                {\n                  name: \"最高\", // highest value\n                  type: \"max\",\n                  valueDim: \"highest\",\n                },\n                {\n                  name: \"最低\", // lowest value\n                  type: \"min\",\n                  valueDim: \"lowest\",\n                },\n                {\n                  name: \"收盘均价\", // 收盘均价 average value on close\n                  type: \"average\",\n                  valueDim: \"close\",\n                },\n              ],\n              tooltip: {\n                formatter: function (param) {\n                  // 使用箭头函数，这样可以正确访问 this\n                  console.log(\"jjjj11111\");\n                  return param.name + \"<br>\" + (param.data.coord || \"\");\n                },\n              },\n            },\n          },\n        ],\n      };\n\n      this.myChart.setOption(option); // 使用配置项生成图表\n      this.window.addEventListener(\"resize\", () => {\n        console.log(\"jjjjj resize\");\n        this.myChart.resize(); // 当窗口大小变化时，自动调整图表大小\n      });\n    },\n    goBack() {\n      this.$router.go(-1);\n    },\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n#container {\n  background-color: aqua;\n  min-height: 100vh;\n  /* 确保容器至少占据整个视口的高度 */\n}\n\n.hello {\n  background-color: #f5f5f5;\n  min-height: 100vh;\n  padding: 10px;\n}\n\n.title-bar {\n  display: flex;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.title-bar button {\n  margin-right: 15px;\n  padding: 5px 10px;\n  background-color: #4caf50;\n  color: white;\n  border: none;\n  cursor: pointer;\n  border-radius: 4px;\n}\n\n.title-bar h1 {\n  margin: 0;\n  font-size: 24px;\n  color: #333;\n}\n\n.button-list {\n  display: flex; /* 将按钮排成横向 */\n  gap: 10px; /* 按钮之间的间距 */\n}\n\nbutton {\n  padding: 8px 16px;\n  background-color: #4caf50;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\nbutton:hover {\n  background-color: #45a049;\n}\n</style>\n","import { render } from \"./RealTime.vue?vue&type=template&id=b4cb9b06&scoped=true\"\nimport script from \"./RealTime.vue?vue&type=script&lang=js\"\nexport * from \"./RealTime.vue?vue&type=script&lang=js\"\n\nimport \"./RealTime.vue?vue&type=style&index=0&id=b4cb9b06&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b4cb9b06\"]])\n\nexport default __exports__"],"names":["class","ref","id","style","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","onClick","_cache","args","$options","goBack","_toDisplayString","$data","name","_hoisted_3","_Fragment","_renderList","buttons","button","index","key","$event","handleClick","content","_hoisted_4","_hoisted_5","upColor","upBorderColor","downColor","downBorderColor","myChart","data","symbol","interval","limit","data0","categoryData","values","created","mounted","console","log","this","$route","params","query","error","fetchDataAndInitChart","window","addEventListener","resizeChart","beforeUnmount","removeEventListener","methods","$toast","apiUrl","axios","get","then","response","processedData","splitData","initChart","catch","rawData","i","length","item","push","Date","toLocaleString","parseFloat","chartDom","$refs","chartContainer","echarts","renderer","useDirtyRect","option","title","text","left","tooltip","trigger","axisPointer","type","legend","selectedMode","grid","right","bottom","xAxis","boundaryGap","axisLine","onZero","splitLine","show","min","max","yAxis","scale","splitArea","dataZoom","start","end","top","series","itemStyle","color","color0","borderColor","borderColor0","markPoint","label","formatter","param","Math","round","value","coord","valueDim","setOption","resize","$router","go","__exports__","render"],"sourceRoot":""}