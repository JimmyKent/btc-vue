"use strict";(self["webpackChunkbtc_vue"]=self["webpackChunkbtc_vue"]||[]).push([[903],{4903:function(t,e,a){a.r(e),a.d(e,{default:function(){return p}});var o=a(6768),r=a(4232);const s={class:"hello"},i={class:"title-bar"},n={ref:"chartContainer",id:"main",style:{width:"100%",height:"600px"}};function l(t,e,a,l,h,c){return(0,o.uX)(),(0,o.CE)("div",s,[(0,o.Lk)("div",i,[(0,o.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>c.goBack&&c.goBack(...t))},"返回"),(0,o.Lk)("h1",null,(0,r.v_)(h.name)+" - USDT",1)]),(0,o.Lk)("div",n,null,512),(0,o.Lk)("button",{onClick:e[1]||(e[1]=(...t)=>c.realTimeData&&c.realTimeData(...t))},"今日实时数据")])}a(4114);var h=a(4373),c=a(1921),d={myChart:null,data(){return{name:"BTC-USDT",symbol:"BTC-USDT",upColor:"#ec0000",upBorderColor:"#8A0000",downColor:"#00da3c",downBorderColor:"#008F28",data0:null,categoryData:[],values:[]}},created(){},mounted(){console.log(this.$route);var t=this.$route.params.symbol||this.$route.query.symbol;this.symbol=t,this.name=this.$route.params.symbolName||this.$route.query.symbolName,console.log("name:",this.name),t||(console.error("Symbol 未找到，使用默认值 BTCUSDT"),t="BTCUSDT"),this.fetchDataAndInitChart(t),window.addEventListener("resize",this.resizeChart)},beforeUnmount(){window.removeEventListener("resize",this.resizeChart)},methods:{goBack(){this.$router.go(-1)},fetchDataAndInitChart(t){const e=`https://data-api.binance.vision/api/v3/uiKlines?symbol=${t}&interval=1d&limit=365`;console.log("apiUrl: ",e),h.A.get(e).then((t=>{this.data0=t.data;const e=this.splitData(this.data0);this.categoryData=e.categoryData,this.values=e.values,this.initChart(this.name+"-USDT")})).catch((function(t){console.log(t)}))},splitData(t){const e=[],a=[];for(let o=0;o<t.length;o++){const r=t[o];e.push(new Date(r[0]).toLocaleString()),a.push([parseFloat(r[1]),parseFloat(r[4]),parseFloat(r[3]),parseFloat(r[2])])}return{categoryData:e,values:a}},initChart(t){if(console.log("initChart"),!this.categoryData.length||!this.values.length)return void console.error("数据未加载完成或无效");const e=this.$refs.chartContainer;this.myChart=c.Ts(e,null,{renderer:"canvas",useDirtyRect:!1});const a={title:{text:t,left:0},tooltip:{trigger:"item",axisPointer:{type:"cross"}},legend:{data:["日K"],selectedMode:"multiple"},grid:{left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:this.categoryData,boundaryGap:!1,axisLine:{onZero:!1},splitLine:{show:!1},min:"dataMin",max:"dataMax"},yAxis:{scale:!0,splitArea:{show:!0}},dataZoom:[{type:"inside",start:50,end:100},{show:!0,type:"slider",top:"90%",start:50,end:100}],series:[{name:"日K",type:"candlestick",data:this.values,itemStyle:{color:this.upColor,color0:this.downColor,borderColor:this.upBorderColor,borderColor0:this.downBorderColor},markPoint:{label:{formatter:function(t){return null!=t?Math.round(t.value)+"":""}},data:[{name:"Mark",coord:["2013/5/31",2300],value:2300,itemStyle:{color:"rgb(41,60,85)"}},{name:"最高",type:"max",valueDim:"highest"},{name:"最低",type:"min",valueDim:"lowest"},{name:"收盘均价",type:"average",valueDim:"close"}],tooltip:{formatter:function(t){return console.log("jjjj11111"),t.name+"<br>"+(t.data.coord||"")}}}}]};this.myChart.setOption(a),this.window.addEventListener("resize",(()=>{console.log("jjjjj resize"),this.myChart.resize()}))},realTimeData(){this.$router.push({path:"/realTime",query:{name:this.name,symbol:this.symbol}})}}},u=a(1241);const m=(0,u.A)(d,[["render",l],["__scopeId","data-v-2923b16d"]]);var p=m}}]);
//# sourceMappingURL=903.80b09367.js.map