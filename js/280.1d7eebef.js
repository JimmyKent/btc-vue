"use strict";(self["webpackChunkbtc_vue"]=self["webpackChunkbtc_vue"]||[]).push([[280],{280:function(t,e,a){a.r(e),a.d(e,{default:function(){return D}});var n=a(6768),o=a(4232);const i={class:"hello"},s={class:"title-bar"},r={class:"button-list"},l=["onClick"],c={ref:"chartContainer",id:"main",style:{width:"100%",height:"600px"}};function h(t,e,a,h,u,d){return(0,n.uX)(),(0,n.CE)("div",i,[(0,n.Lk)("div",s,[(0,n.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>d.goBack&&d.goBack(...t))},"返回"),(0,n.Lk)("h1",null,(0,o.v_)(u.name)+" - USDT 今日实时数据",1)]),(0,n.Lk)("div",r,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(u.buttons,((t,e)=>((0,n.uX)(),(0,n.CE)("button",{key:e,onClick:e=>d.handleClick(t)},(0,o.v_)(t.content),9,l)))),128))]),(0,n.Lk)("div",c,null,512)])}a(4114);var u=a(4373),d=a(1921);const m="#ec0000",v="#8A0000",y="#00da3c",p="#008F28";var g={myChart:null,data(){return{name:"BTC-USDT",symbol:"BTC-USDT",interval:"1d",limit:500,buttons:[{content:"1分",interval:"1m"},{content:"15分钟",interval:"15m"},{content:"1小时",interval:"1h"},{content:"1天",interval:"1d"},{content:"1月",interval:"1M"}],data0:null,categoryData:[],values:[]}},created(){},mounted(){console.log(this.$route);var t=this.$route.params.symbol||this.$route.query.symbol;this.symbol=t,this.name=this.$route.params.name||this.$route.query.name,console.log("name:",this.name,", symbol:",this.symbol),t||(console.error("Symbol 未找到，使用默认值 BTCUSDT"),t="BTCUSDT"),this.fetchDataAndInitChart(t,this.interval,this.limit),window.addEventListener("resize",this.resizeChart)},beforeUnmount(){window.removeEventListener("resize",this.resizeChart)},methods:{handleClick(t){this.$toast(`${t.content}, ${t.interval}`),this.fetchDataAndInitChart(this.symbol,t.interval,500)},fetchDataAndInitChart(t,e,a){const n=`https://data-api.binance.vision/api/v3/uiKlines?symbol=${t}&interval=${e}&limit=${a}`;console.log("apiUrl: ",n),u.A.get(n).then((t=>{this.data0=t.data;const e=this.splitData(this.data0);this.categoryData=e.categoryData,this.values=e.values,this.initChart(this.name+"-USDT")})).catch((function(t){console.log(t)}))},splitData(t){const e=[],a=[];for(let n=0;n<t.length;n++){const o=t[n];e.push(new Date(o[0]).toLocaleString()),a.push([parseFloat(o[1]),parseFloat(o[4]),parseFloat(o[3]),parseFloat(o[2])])}return{categoryData:e,values:a}},initChart(t){if(console.log("initChart"),!this.categoryData.length||!this.values.length)return void console.error("数据未加载完成或无效");const e=this.$refs.chartContainer;this.myChart=d.Ts(e,null,{renderer:"canvas",useDirtyRect:!1});const a={title:{text:t,left:0},tooltip:{trigger:"item",axisPointer:{type:"cross"}},legend:{data:["日K"],selectedMode:"multiple"},grid:{left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:this.categoryData,boundaryGap:!1,axisLine:{onZero:!1},splitLine:{show:!1},min:"dataMin",max:"dataMax"},yAxis:{scale:!0,splitArea:{show:!0}},dataZoom:[{type:"inside",start:50,end:100},{show:!0,type:"slider",top:"90%",start:50,end:100}],series:[{name:"日K",type:"candlestick",data:this.values,itemStyle:{color:m,color0:y,borderColor:v,borderColor0:p},markPoint:{label:{formatter:function(t){return null!=t?Math.round(t.value)+"":""}},data:[{name:"Mark",coord:["2013/5/31",2300],value:2300,itemStyle:{color:"rgb(41,60,85)"}},{name:"最高",type:"max",valueDim:"highest"},{name:"最低",type:"min",valueDim:"lowest"},{name:"收盘均价",type:"average",valueDim:"close"}],tooltip:{formatter:function(t){return console.log("jjjj11111"),t.name+"<br>"+(t.data.coord||"")}}}}]};this.myChart.setOption(a),this.window.addEventListener("resize",(()=>{console.log("jjjjj resize"),this.myChart.resize()}))},goBack(){this.$router.go(-1)}}},b=a(1241);const C=(0,b.A)(g,[["render",h],["__scopeId","data-v-b4cb9b06"]]);var D=C}}]);
//# sourceMappingURL=280.1d7eebef.js.map